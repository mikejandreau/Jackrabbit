"use strict";

// CLASS HELPERS
// Vanilla JS class toggling scripts for use without jQuery
// hasClass
function hasClass(elem, className) {
  return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
} // addClass


function addClass(elem, className) {
  if (!hasClass(elem, className)) {
    elem.className += ' ' + className;
  }
} // removeClass


function removeClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, ' ') + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(' ' + className + ' ') >= 0) {
      newClass = newClass.replace(' ' + className + ' ', ' ');
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  }
} // toggleClass


function toggleClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, " ") + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(" " + className + " ") >= 0) {
      newClass = newClass.replace(" " + className + " ", " ");
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  } else {
    elem.className += ' ' + className;
  }
}
"use strict";

function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

/**
 * File navigation.js.
 *
 * Handles toggling the navigation menu for small screens and enables TAB key
 * navigation support for dropdown menus.
 */
(function () {
  var siteNavigation = document.getElementById('site-navigation'); // Return early if the navigation don't exist.

  if (!siteNavigation) {
    return;
  }

  var button = siteNavigation.getElementsByTagName('button')[0]; // Return early if the button don't exist.

  if ('undefined' === typeof button) {
    return;
  }

  var menu = siteNavigation.getElementsByTagName('ul')[0]; // Hide menu toggle button if menu is empty and return early.

  if ('undefined' === typeof menu) {
    button.style.display = 'none';
    return;
  }

  if (!menu.classList.contains('nav-menu')) {
    menu.classList.add('nav-menu');
  } // Toggle the .toggled class and the aria-expanded value each time the button is clicked.


  button.addEventListener('click', function () {
    siteNavigation.classList.toggle('toggled');

    if (button.getAttribute('aria-expanded') === 'true') {
      button.setAttribute('aria-expanded', 'false');
    } else {
      button.setAttribute('aria-expanded', 'true');
    }
  }); // Remove the .toggled class and set aria-expanded to false when the user clicks outside the navigation.

  document.addEventListener('click', function (event) {
    var isClickInside = siteNavigation.contains(event.target);

    if (!isClickInside) {
      siteNavigation.classList.remove('toggled');
      button.setAttribute('aria-expanded', 'false');
    }
  }); // Get all the link elements within the menu.

  var links = menu.getElementsByTagName('a'); // Get all the link elements with children within the menu.

  var linksWithChildren = menu.querySelectorAll('.menu-item-has-children > a, .page_item_has_children > a'); // Toggle focus each time a menu link is focused or blurred.

  var _iterator = _createForOfIteratorHelper(links),
      _step;

  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var link = _step.value;
      link.addEventListener('focus', toggleFocus, true);
      link.addEventListener('blur', toggleFocus, true);
    } // Toggle focus each time a menu link with children receive a touch event.

  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }

  var _iterator2 = _createForOfIteratorHelper(linksWithChildren),
      _step2;

  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var _link = _step2.value;

      _link.addEventListener('touchstart', toggleFocus, false);
    }
    /**
     * Sets or removes .focus class on an element.
     */

  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }

  function toggleFocus() {
    if (event.type === 'focus' || event.type === 'blur') {
      var self = this; // Move up through the ancestors of the current link until we hit .nav-menu.

      while (!self.classList.contains('nav-menu')) {
        // On li elements toggle the class .focus.
        if ('li' === self.tagName.toLowerCase()) {
          self.classList.toggle('focus');
        }

        self = self.parentNode;
      }
    }

    if (event.type === 'touchstart') {
      var menuItem = this.parentNode;
      event.preventDefault();

      var _iterator3 = _createForOfIteratorHelper(menuItem.parentNode.children),
          _step3;

      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var link = _step3.value;

          if (menuItem !== link) {
            link.classList.remove('focus');
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }

      menuItem.classList.toggle('focus');
    }
  }
})(); // CLASS HELPERS
// Vanilla JS class toggling scripts for use without jQuery
// hasClass


function hasClass(elem, className) {
  return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
} // addClass


function addClass(elem, className) {
  if (!hasClass(elem, className)) {
    elem.className += ' ' + className;
  }
} // removeClass


function removeClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, ' ') + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(' ' + className + ' ') >= 0) {
      newClass = newClass.replace(' ' + className + ' ', ' ');
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  }
} // toggleClass


function toggleClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, " ") + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(" " + className + " ") >= 0) {
      newClass = newClass.replace(" " + className + " ", " ");
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  } else {
    elem.className += ' ' + className;
  }
}

(function ($) {
  "use strict"; // Start of use strict
  // Smooth scrolling using jQuery easing

  $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');

      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top - 48
        }, 1000, "easeInOutExpo");
        return false;
      }
    }
  }); // SCROLLUP BUTTON
  // show scrollup button after scrolling 300px
  // scrollToTopButton = document.getElementById("scrollUpButton");

  var showScrollToTop = function showScrollToTop() {
    var y = window.scrollY;

    if (y >= 300) {
      $("#scrollUpButton").addClass("show");
    } else {
      $("#scrollUpButton").removeClass("show");
    }
  };

  window.addEventListener("scroll", showScrollToTop);
})(jQuery); // End of use strict
"use strict";

// Smooth scrolling
(function ($) {
  "use strict"; // Start of use strict
  // Smooth scrolling using jQuery easing

  $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');

      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top - 48
        }, 1000, "easeInOutExpo");
        return false;
      }
    }
  }); // SCROLLUP BUTTON
  // show scrollup button after scrolling 300px
  // scrollToTopButton = document.getElementById("scrollUpButton");

  var showScrollToTop = function showScrollToTop() {
    var y = window.scrollY;

    if (y >= 300) {
      $("#scrollUpButton").addClass("show");
    } else {
      $("#scrollUpButton").removeClass("show");
    }
  };

  window.addEventListener("scroll", showScrollToTop);
})(jQuery); // End of use strict
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzLWhlbHBlcnMuanMiLCJuYXZpZ2F0aW9uLmpzIiwic2Nyb2xsdXAuanMiXSwibmFtZXMiOlsiaGFzQ2xhc3MiLCJlbGVtIiwiY2xhc3NOYW1lIiwiUmVnRXhwIiwidGVzdCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJuZXdDbGFzcyIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlQ2xhc3MiLCJzaXRlTmF2aWdhdGlvbiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJidXR0b24iLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIm1lbnUiLCJzdHlsZSIsImRpc3BsYXkiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGUiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJldmVudCIsImlzQ2xpY2tJbnNpZGUiLCJ0YXJnZXQiLCJyZW1vdmUiLCJsaW5rcyIsImxpbmtzV2l0aENoaWxkcmVuIiwicXVlcnlTZWxlY3RvckFsbCIsImxpbmsiLCJ0b2dnbGVGb2N1cyIsInR5cGUiLCJzZWxmIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyZW50Tm9kZSIsIm1lbnVJdGVtIiwicHJldmVudERlZmF1bHQiLCJjaGlsZHJlbiIsIiQiLCJjbGljayIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJob3N0bmFtZSIsImhhc2giLCJsZW5ndGgiLCJzbGljZSIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJzaG93U2Nyb2xsVG9Ub3AiLCJ5Iiwid2luZG93Iiwic2Nyb2xsWSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBO0FBRUE7QUFDQSxTQUFTQSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsU0FBeEIsRUFBbUM7QUFDL0IsU0FBTyxJQUFJQyxNQUFKLENBQVcsTUFBTUQsU0FBTixHQUFrQixHQUE3QixFQUFrQ0UsSUFBbEMsQ0FBdUMsTUFBTUgsSUFB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UlNcclxuLy8gVmFuaWxsYSBKUyBjbGFzcyB0b2dnbGluZyBzY3JpcHRzIGZvciB1c2Ugd2l0aG91dCBqUXVlcnlcclxuXHJcbi8vIGhhc0NsYXNzXHJcbmZ1bmN0aW9uIGhhc0NsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xyXG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJyAnICsgY2xhc3NOYW1lICsgJyAnKS50ZXN0KCcgJyArIGVsZW0uY2xhc3NOYW1lICsgJyAnKTtcclxufVxyXG5cclxuLy8gYWRkQ2xhc3NcclxuZnVuY3Rpb24gYWRkQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgICBpZiAoIWhhc0NsYXNzKGVsZW0sIGNsYXNzTmFtZSkpIHtcclxuICAgICAgICBlbGVtLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIHJlbW92ZUNsYXNzXHJcbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xyXG4gICAgdmFyIG5ld0NsYXNzID0gJyAnICsgZWxlbS5jbGFzc05hbWUucmVwbGFjZSgvW1xcdFxcclxcbl0vZywgJyAnKSArICcgJztcclxuICAgIGlmIChoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgd2hpbGUgKG5ld0NsYXNzLmluZGV4T2YoJyAnICsgY2xhc3NOYW1lICsgJyAnKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIG5ld0NsYXNzID0gbmV3Q2xhc3MucmVwbGFjZSgnICcgKyBjbGFzc05hbWUgKyAnICcsICcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW0uY2xhc3NOYW1lID0gbmV3Q2xhc3MucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyB0b2dnbGVDbGFzc1xyXG5mdW5jdGlvbiB0b2dnbGVDbGFzcyhlbGVtLCBjbGFzc05hbWUpIHtcclxuICAgIHZhciBuZXdDbGFzcyA9ICcgJyArIGVsZW0uY2xhc3NOYW1lLnJlcGxhY2UoL1tcXHRcXHJcXG5dL2csIFwiIFwiKSArICcgJztcclxuICAgIGlmIChoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgd2hpbGUgKG5ld0NsYXNzLmluZGV4T2YoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIikgPj0gMCkge1xyXG4gICAgICAgICAgICBuZXdDbGFzcyA9IG5ld0NsYXNzLnJlcGxhY2UoXCIgXCIgKyBjbGFzc05hbWUgKyBcIiBcIiwgXCIgXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IG5ld0NsYXNzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBGaWxlIG5hdmlnYXRpb24uanMuXHJcbiAqXHJcbiAqIEhhbmRsZXMgdG9nZ2xpbmcgdGhlIG5hdmlnYXRpb24gbWVudSBmb3Igc21hbGwgc2NyZWVucyBhbmQgZW5hYmxlcyBUQUIga2V5XHJcbiAqIG5hdmlnYXRpb24gc3VwcG9ydCBmb3IgZHJvcGRvd24gbWVudXMuXHJcbiAqL1xyXG4oIGZ1bmN0aW9uKCkge1xyXG5cdGNvbnN0IHNpdGVOYXZpZ2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoICdzaXRlLW5hdmlnYXRpb24nICk7XHJcblxyXG5cdC8vIFJldHVybiBlYXJseSBpZiB0aGUgbmF2aWdhdGlvbiBkb24ndCBleGlzdC5cclxuXHRpZiAoICEgc2l0ZU5hdmlnYXRpb24gKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRjb25zdCBidXR0b24gPSBzaXRlTmF2aWdhdGlvbi5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2J1dHRvbicgKVsgMCBdO1xyXG5cclxuXHQvLyBSZXR1cm4gZWFybHkgaWYgdGhlIGJ1dHRvbiBkb24ndCBleGlzdC5cclxuXHRpZiAoICd1bmRlZmluZWQnID09PSB0eXBlb2YgYnV0dG9uICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgbWVudSA9IHNpdGVOYXZpZ2F0aW9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAndWwnIClbIDAgXTtcclxuXHJcblx0Ly8gSGlkZSBtZW51IHRvZ2dsZSBidXR0b24gaWYgbWVudSBpcyBlbXB0eSBhbmQgcmV0dXJuIGVhcmx5LlxyXG5cdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBtZW51ICkge1xyXG5cdFx0YnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRpZiAoICEgbWVudS5jbGFzc0xpc3QuY29udGFpbnMoICduYXYtbWVudScgKSApIHtcclxuXHRcdG1lbnUuY2xhc3NMaXN0LmFkZCggJ25hdi1tZW51JyApO1xyXG5cdH1cclxuXHJcblx0Ly8gVG9nZ2xlIHRoZSAudG9nZ2xlZCBjbGFzcyBhbmQgdGhlIGFyaWEtZXhwYW5kZWQgdmFsdWUgZWFjaCB0aW1lIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cclxuXHRidXR0b24uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRzaXRlTmF2aWdhdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCAndG9nZ2xlZCcgKTtcclxuXHJcblx0XHRpZiAoIGJ1dHRvbi5nZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJyApID09PSAndHJ1ZScgKSB7XHJcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScgKTtcclxuXHRcdH1cclxuXHR9ICk7XHJcblxyXG5cdC8vIFJlbW92ZSB0aGUgLnRvZ2dsZWQgY2xhc3MgYW5kIHNldCBhcmlhLWV4cGFuZGVkIHRvIGZhbHNlIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG91dHNpZGUgdGhlIG5hdmlnYXRpb24uXHJcblx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0Y29uc3QgaXNDbGlja0luc2lkZSA9IHNpdGVOYXZpZ2F0aW9uLmNvbnRhaW5zKCBldmVudC50YXJnZXQgKTtcclxuXHJcblx0XHRpZiAoICEgaXNDbGlja0luc2lkZSApIHtcclxuXHRcdFx0c2l0ZU5hdmlnYXRpb24uY2xhc3NMaXN0LnJlbW92ZSggJ3RvZ2dsZWQnICk7XHJcblx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xyXG5cdFx0fVxyXG5cdH0gKTtcclxuXHJcblx0Ly8gR2V0IGFsbCB0aGUgbGluayBlbGVtZW50cyB3aXRoaW4gdGhlIG1lbnUuXHJcblx0Y29uc3QgbGlua3MgPSBtZW51LmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYScgKTtcclxuXHJcblx0Ly8gR2V0IGFsbCB0aGUgbGluayBlbGVtZW50cyB3aXRoIGNoaWxkcmVuIHdpdGhpbiB0aGUgbWVudS5cclxuXHRjb25zdCBsaW5rc1dpdGhDaGlsZHJlbiA9IG1lbnUucXVlcnlTZWxlY3RvckFsbCggJy5tZW51LWl0ZW0taGFzLWNoaWxkcmVuID4gYSwgLnBhZ2VfaXRlbV9oYXNfY2hpbGRyZW4gPiBhJyApO1xyXG5cclxuXHQvLyBUb2dnbGUgZm9jdXMgZWFjaCB0aW1lIGEgbWVudSBsaW5rIGlzIGZvY3VzZWQgb3IgYmx1cnJlZC5cclxuXHRmb3IgKCBjb25zdCBsaW5rIG9mIGxpbmtzICkge1xyXG5cdFx0bGluay5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCB0b2dnbGVGb2N1cywgdHJ1ZSApO1xyXG5cdFx0bGluay5hZGRFdmVudExpc3RlbmVyKCAnYmx1cicsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XHJcblx0fVxyXG5cclxuXHQvLyBUb2dnbGUgZm9jdXMgZWFjaCB0aW1lIGEgbWVudSBsaW5rIHdpdGggY2hpbGRyZW4gcmVjZWl2ZSBhIHRvdWNoIGV2ZW50LlxyXG5cdGZvciAoIGNvbnN0IGxpbmsgb2YgbGlua3NXaXRoQ2hpbGRyZW4gKSB7XHJcblx0XHRsaW5rLmFkZEV2ZW50TGlzdGVuZXIoICd0b3VjaHN0YXJ0JywgdG9nZ2xlRm9jdXMsIGZhbHNlICk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBTZXRzIG9yIHJlbW92ZXMgLmZvY3VzIGNsYXNzIG9uIGFuIGVsZW1lbnQuXHJcblx0ICovXHJcblx0ZnVuY3Rpb24gdG9nZ2xlRm9jdXMoKSB7XHJcblx0XHRpZiAoIGV2ZW50LnR5cGUgPT09ICdmb2N1cycgfHwgZXZlbnQudHlwZSA9PT0gJ2JsdXInICkge1xyXG5cdFx0XHRsZXQgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vIE1vdmUgdXAgdGhyb3VnaCB0aGUgYW5jZXN0b3JzIG9mIHRoZSBjdXJyZW50IGxpbmsgdW50aWwgd2UgaGl0IC5uYXYtbWVudS5cclxuXHRcdFx0d2hpbGUgKCAhIHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCAnbmF2LW1lbnUnICkgKSB7XHJcblx0XHRcdFx0Ly8gT24gbGkgZWxlbWVudHMgdG9nZ2xlIHRoZSBjbGFzcyAuZm9jdXMuXHJcblx0XHRcdFx0aWYgKCAnbGknID09PSBzZWxmLnRhZ05hbWUudG9Mb3dlckNhc2UoKSApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xhc3NMaXN0LnRvZ2dsZSggJ2ZvY3VzJyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzZWxmID0gc2VsZi5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBldmVudC50eXBlID09PSAndG91Y2hzdGFydCcgKSB7XHJcblx0XHRcdGNvbnN0IG1lbnVJdGVtID0gdGhpcy5wYXJlbnROb2RlO1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRmb3IgKCBjb25zdCBsaW5rIG9mIG1lbnVJdGVtLnBhcmVudE5vZGUuY2hpbGRyZW4gKSB7XHJcblx0XHRcdFx0aWYgKCBtZW51SXRlbSAhPT0gbGluayApIHtcclxuXHRcdFx0XHRcdGxpbmsuY2xhc3NMaXN0LnJlbW92ZSggJ2ZvY3VzJyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRtZW51SXRlbS5jbGFzc0xpc3QudG9nZ2xlKCAnZm9jdXMnICk7XHJcblx0XHR9XHJcblx0fVxyXG59KCkgKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBDTEFTUyBIRUxQRVJTXHJcbi8vIFZhbmlsbGEgSlMgY2xhc3MgdG9nZ2xpbmcgc2NyaXB0cyBmb3IgdXNlIHdpdGhvdXQgalF1ZXJ5XHJcblxyXG4vLyBoYXNDbGFzc1xyXG5mdW5jdGlvbiBoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUmVnRXhwKCcgJyArIGNsYXNzTmFtZSArICcgJykudGVzdCgnICcgKyBlbGVtLmNsYXNzTmFtZSArICcgJyk7XHJcbn1cclxuXHJcbi8vIGFkZENsYXNzXHJcbmZ1bmN0aW9uIGFkZENsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xyXG4gICAgaWYgKCFoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpKSB7XHJcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyByZW1vdmVDbGFzc1xyXG5mdW5jdGlvbiByZW1vdmVDbGFzcyhlbGVtLCBjbGFzc05hbWUpIHtcclxuICAgIHZhciBuZXdDbGFzcyA9ICcgJyArIGVsZW0uY2xhc3NOYW1lLnJlcGxhY2UoL1tcXHRcXHJcXG5dL2csICcgJykgKyAnICc7XHJcbiAgICBpZiAoaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSkge1xyXG4gICAgICAgIHdoaWxlIChuZXdDbGFzcy5pbmRleE9mKCcgJyArIGNsYXNzTmFtZSArICcgJykgPj0gMCkge1xyXG4gICAgICAgICAgICBuZXdDbGFzcyA9IG5ld0NsYXNzLnJlcGxhY2UoJyAnICsgY2xhc3NOYW1lICsgJyAnLCAnICcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbGVtLmNsYXNzTmFtZSA9IG5ld0NsYXNzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gdG9nZ2xlQ2xhc3NcclxuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XHJcbiAgICB2YXIgbmV3Q2xhc3MgPSAnICcgKyBlbGVtLmNsYXNzTmFtZS5yZXBsYWNlKC9bXFx0XFxyXFxuXS9nLCBcIiBcIikgKyAnICc7XHJcbiAgICBpZiAoaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSkge1xyXG4gICAgICAgIHdoaWxlIChuZXdDbGFzcy5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpID49IDApIHtcclxuICAgICAgICAgICAgbmV3Q2xhc3MgPSBuZXdDbGFzcy5yZXBsYWNlKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIsIFwiIFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBuZXdDbGFzcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGVsZW0uY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcclxuICAgIH1cclxufVxyXG5cclxuKGZ1bmN0aW9uKCQpIHtcclxuICBcInVzZSBzdHJpY3RcIjsgLy8gU3RhcnQgb2YgdXNlIHN0cmljdFxyXG5cclxuICAvLyBTbW9vdGggc2Nyb2xsaW5nIHVzaW5nIGpRdWVyeSBlYXNpbmdcclxuICAkKCdhLmpzLXNjcm9sbC10cmlnZ2VyW2hyZWYqPVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgPT0gdGhpcy5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpICYmIGxvY2F0aW9uLmhvc3RuYW1lID09IHRoaXMuaG9zdG5hbWUpIHtcclxuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcclxuICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyAnXScpO1xyXG4gICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgIHNjcm9sbFRvcDogKHRhcmdldC5vZmZzZXQoKS50b3AgLSA0OClcclxuICAgICAgICB9LCAxMDAwLCBcImVhc2VJbk91dEV4cG9cIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4vLyBTQ1JPTExVUCBCVVRUT05cclxuLy8gc2hvdyBzY3JvbGx1cCBidXR0b24gYWZ0ZXIgc2Nyb2xsaW5nIDMwMHB4XHJcbi8vIHNjcm9sbFRvVG9wQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JvbGxVcEJ1dHRvblwiKTtcclxudmFyIHNob3dTY3JvbGxUb1RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgeSA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gIGlmICh5ID49IDMwMCkge1xyXG4gICAgJChcIiNzY3JvbGxVcEJ1dHRvblwiKS5hZGRDbGFzcyhcInNob3dcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoXCIjc2Nyb2xsVXBCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xyXG4gIH1cclxufTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgc2hvd1Njcm9sbFRvVG9wKTtcclxuXHJcbn0pKGpRdWVyeSk7IC8vIEVuZCBvZiB1c2Ugc3RyaWN0XHJcbiIsIi8vIFNtb290aCBzY3JvbGxpbmdcclxuXHJcbihmdW5jdGlvbigkKSB7XHJcbiAgXCJ1c2Ugc3RyaWN0XCI7IC8vIFN0YXJ0IG9mIHVzZSBzdHJpY3RcclxuXHJcbiAgLy8gU21vb3RoIHNjcm9sbGluZyB1c2luZyBqUXVlcnkgZWFzaW5nXHJcbiAgJCgnYS5qcy1zY3JvbGwtdHJpZ2dlcltocmVmKj1cIiNcIl06bm90KFtocmVmPVwiI1wiXSknKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGlmIChsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpID09IHRoaXMucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSAmJiBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lKSB7XHJcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XHJcbiAgICAgIHRhcmdldCA9IHRhcmdldC5sZW5ndGggPyB0YXJnZXQgOiAkKCdbbmFtZT0nICsgdGhpcy5oYXNoLnNsaWNlKDEpICsgJ10nKTtcclxuICAgICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcclxuICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICBzY3JvbGxUb3A6ICh0YXJnZXQub2Zmc2V0KCkudG9wIC0gNDgpXHJcbiAgICAgICAgfSwgMTAwMCwgXCJlYXNlSW5PdXRFeHBvXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuLy8gU0NST0xMVVAgQlVUVE9OXHJcbi8vIHNob3cgc2Nyb2xsdXAgYnV0dG9uIGFmdGVyIHNjcm9sbGluZyAzMDBweFxyXG4vLyBzY3JvbGxUb1RvcEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2Nyb2xsVXBCdXR0b25cIik7XHJcbnZhciBzaG93U2Nyb2xsVG9Ub3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHkgPSB3aW5kb3cuc2Nyb2xsWTtcclxuICBpZiAoeSA+PSAzMDApIHtcclxuICAgICQoXCIjc2Nyb2xsVXBCdXR0b25cIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKFwiI3Njcm9sbFVwQnV0dG9uXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICB9XHJcbn07XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIHNob3dTY3JvbGxUb1RvcCk7XHJcblxyXG59KShqUXVlcnkpOyAvLyBFbmQgb2YgdXNlIHN0cmljdFxyXG4iXX0=